/*! Version 1.1.1 */!function (e) { var t = {}; function n(r) { if (t[r]) return t[r].exports; var o = t[r] = { i: r, l: !1, exports: {} }; return e[r].call(o.exports, o, o.exports, n), o.l = !0, o.exports } n.m = e, n.c = t, n.d = function (e, t, r) { n.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: r }) }, n.r = function (e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) }, n.t = function (e, t) { if (1 & t && (e = n(e)), 8 & t) return e; if (4 & t && "object" == typeof e && e && e.__esModule) return e; var r = Object.create(null); if (n.r(r), Object.defineProperty(r, "default", { enumerable: !0, value: e }), 2 & t && "string" != typeof e) for (var o in e) n.d(r, o, function (t) { return e[t] }.bind(null, o)); return r }, n.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return n.d(t, "a", t), t }, n.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, n.p = "/", n(n.s = 0) }([function (e, t, n) { "use strict"; function r(e) { return function (e) { if (Array.isArray(e)) { for (var t = 0, n = new Array(e.length); t < e.length; t++)n[t] = e[t]; return n } }(e) || function (e) { if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e) }(e) || function () { throw new TypeError("Invalid attempt to spread non-iterable instance") }() } n.r(t); var o, i, a = self.console, c = Object.freeze({ NONE: 0, ERROR: 1, WARN: 2, INFO: 3, LOG: 4 }), l = ["error", "warn", "info", "log"], u = window.Rollbar && window.Rollbar.options.enabled, d = { debug: ["critical", "error", "warn", "debug", "log"], info: ["critical", "error", "warn", "info"], warning: ["critical", "error", "warn"], error: ["critical", "error"], critical: ["critical"] }, s = void 0 !== a && void 0 !== a.log && void 0 !== a.error && void 0 !== a.debug && void 0 !== a.warn && "function" == typeof Function.prototype.apply, f = function (e, t, n, r) { return a[t] ? n ? a[t](n) : a[t]() : e.log("----------- ".concat(n || r, " ----------- ")) }, p = function (e) { var t = e.level, n = { setLevel: function (e) { return t = e, n }, getLevel: function () { return t || o } }; return l.forEach(function (e) { n[e] = function () { for (var t = arguments.length, o = new Array(t), i = 0; i < t; i++)o[i] = arguments[i]; return function (e, t, n) { if (s) { var o, i = l.indexOf(t), c = e.getLevel(); return ~i && c >= i + 1 && a[t].apply(a, r(n)), u && ~d[window.Rollbar.options.reportLevel].indexOf(t) && (o = window.Rollbar)[t].apply(o, r(n)), e } }(n, e, o) } }), n.groupCollapsed = function (e) { return f(n, "groupCollapsed", e, "GROUP START") }, n.group = function (e) { return f(n, "group", e, "GROUP START") }, n.groupEnd = function () { return f(n, "groupEnd", null, "GROUP END") }, n.devError = function () { 0 }, n.debug = n.log, n }, g = function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; e.level = e.level || c.NONE; var t = e.newInstance || !i ? p(e) : i; return i || e.newInstance || (i = t), t }, h = g, v = { LOCAL: "local", URL: "url", CAMERA: "camera", IMAGE_SEARCH: "image_search", GOOGLE_DRIVE: "google_drive", DROPBOX: "dropbox", FACEBOOK: "facebook", INSTAGRAM: "instagram", SHUTTERSTOCK: "shutterstock" }, m = "upload-finish", y = "widget-view-change", b = "display-changed", w = "uw_init", O = "uw_mini", x = "uw_config", P = "uw_prepare", E = "uw_prebatch", j = "uw_event", S = "uw_show", C = "uw_hide", I = "uw_tags", k = "uw_upload_presets", _ = "uw_file", A = "uw_clientbatch", M = "uw_metadata_schema", D = ["buttonCaption", "buttonClass", "queueViewPosition", "controlVpMeta", "fieldName", "frameZIndex", "widgetHost"], N = (["sources", "secure", "defaultSource", "uploadHost"].concat(["googleApiKey", "dropboxAppKey", "facebookAppId", "instagramServer", "shutterstockServer", "googleDriveClientId", "searchBySites", "searchByRights"]).concat(["theme", "text", "language", "styles"]).concat(["showPoweredBy", "showInsecurePreview", "encryption"]).concat(["uploadPrefix", "debug", "dev", "staging"]).concat(D).concat(["cropping", "croppingAspectRatio", "croppingDefaultSelectionRatio", "croppingShowDimensions", "croppingCoordinatesMode", "croppingShowBackButton", "croppingValidateDimensions", "showSkipCropButton"]), { INITIAL: "initial", EXPANDED: "expanded", MINI: "minimized" }), R = function (e, t, n, r) { var o = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : null, i = (o = o || self).document.createElement(e); if (t = t || {}, n && (t.class = n), t) { var a = t; Object.keys(a).forEach(function (e) { return i.setAttribute(e, a[e]) }) } if (r) { var c = r; Object.keys(c).forEach(function (e) { return i.dataset[e] = c[e] }) } return i }, T = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; return t = t || self, function (e) { return "string" == typeof e }(e) ? t.document.querySelector(e) : e }, L = function (e) { e.parentNode && e.parentNode.removeChild(e) }, U = function (e, t) { Object.keys(t).forEach(function (n) { e.style[n] = t[n] }) }, W = function (e) { U(e, { display: "none" }) }, F = "FileReader" in self && "FileList" in self && "Blob" in self, z = function (e) { return "string" == typeof e }, B = function (e) { return "function" == typeof e }, H = function (e, t) { return !!(e.compareDocumentPosition(t) & Node.DOCUMENT_POSITION_CONTAINED_BY) }, q = 500, V = 55, G = "right:35px", $ = "(min-width: 767px)", K = 610, X = "hidden", J = "shown"; function Q(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); t && (r = r.filter(function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable })), n.push.apply(n, r) } return n } function Y(e, t, n) { return t in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e } var Z = g(), ee = function (e, t, n) { var r, o, i = /cloudinary\.com/; Z.log("[all.comms]: using pm domain regex =  ".concat(i.toString())); var a = function (e, t) { n.widgetCallback && n.widgetCallback(t, e) }, c = function (e) { var t; try { z(e) && (t = JSON.parse(e)) } catch (t) { Z.log("[all.comms]: failed to deserialize message: ", e) } return t }, l = function (e, t) { var r = arguments.length > 2 && void 0 !== arguments[2] && arguments[2] ? { type: e, data: t } : function (e, t) { return JSON.stringify({ type: e, data: t }) }(e, t); n.postMessage(r) }, u = function (e) { a({ info: e, event: b, uw_event: !0, data: { event: b, info: e } }) }, d = (Y(r = {}, y, function (e) { n.handleWidgetViewTypeChange(e.info); var t = e.info.type === N.MINI ? N.MINI : N.EXPANDED; u(t) }), Y(r, m, function (e) { if (Z.log("[all.comms]: received uploaded file data - ", e), e.info.failed) a(e.info, { status: e.info.status, statusText: e.info.statusText }), n.triggerEvent("cloudinarywidgetfileuploadfail", [e.info]); else { var t = e.info.uploadInfo, r = { event: "success", info: function (e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}; t % 2 ? Q(n, !0).forEach(function (t) { Y(e, t, n[t]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : Q(n).forEach(function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) }) } return e }({ id: e.info.id, batchId: e.info.batchId }, t) }; n.processUploadResult(t), a(r), n.triggerEvent("cloudinarywidgetfileuploadsuccess", r) } }), r), s = (Y(o = {}, j, function (e, t) { e.event && d[e.event] ? d[e.event](e, t) : a({ info: e.info, event: e.event, uw_event: !0, data: e }) }), Y(o, C, function () { n.hideWidget(); var e = { event: "close", info: { message: "user closed the widget" } }; a(e), n.triggerEvent("cloudinarywidgetclosed", e), u(X) }), Y(o, P, function (e, t) { var n = function (e) { return l(P, e) }, r = t.prepareUploadParams || t.uploadSignature; "function" == typeof r ? r(function (e) { Z.log("[all.comms]: received prepared data from client: ", e); var t = [].concat(e).map(function (e) { return "string" == typeof e ? { signature: e } : e }); n(t) }, e.request) : "string" == typeof t.uploadSignature && n([{ signature: t.uploadSignature }]) }), Y(o, E, function (e, t) { if ("function" != typeof t.preBatch) throw new Error("UploadWidget - preBatch handler not found!"); t.preBatch(function (e) { Z.log("[all.comms]: received pre-batch data from client: ", e), l(E, e) }, e.request) }), Y(o, I, function (e, t) { t.getTags(function (e) { Z.log("[all.comms]: received tags from client: ", e), l(I, { tags: e }) }, e.prefix) }), Y(o, k, function (e, t) { t.getUploadPresets(function (e) { Z.log("[all.comms]: received uploadPresets from client: ", e), l(k, { uploadPresets: e }) }) }), Y(o, M, function (e, t) { t.getMetadataSchema(function (e) { Z.log("[all.comms]: received metadata schema from client: ", e), l(M, e) }, e) }), o); return window.addEventListener("message", function (t) { var n = e(); if (t.origin.match(i)) { var r = c(t.data), o = !1; r && r.widgetId && r.widgetId === n.widgetId && (Z.log("[all.comms]: received message from widget: ".concat(n.widgetId), r), s[r.type] && (o = !0, s[r.type](r, n))), o || Z.log("[all.comms]: received invalid message, invalid widget ID or invalid type! ", t.data) } }), { sendMessage: l, sendDisplayChangedCallback: u } }, te = /(left|right)(?::([0-9a-z]*))?$/, ne = function (e, t, n) { var r = e(), o = { raw: G, side: null, offset: null }, i = R("iframe", { frameborder: "no", allow: "camera", width: "100%", height: "100%" }, null, { test: "uw-iframe" }); U(i, { border: "none", background: "transparent" }); var a = window.matchMedia($), c = r.inlineContainer && T(r.inlineContainer), l = r.frameContainer && T(r.frameContainer); c && U(c, { minHeight: "".concat(K, "px"), overflowX: "hidden" }), l && U(l, { position: "relative" }); var u, d = null, s = !1, f = "", p = !1, g = !1, h = !1, v = !1, m = function (e) { e.preventDefault() }, y = function () { if (!c && !l) { var t = h && v; u.body && (d = null === d ? u.body.style.overflow : d, u.body.style.overflow = t ? "hidden" : d), function (e) { e ? u.addEventListener("touchmove", m) : u.removeEventListener("touchmove", m) }(t), function (t) { if (!0 === e().controlVpMeta) if (t) { var n = T('head meta[name="viewport"]', self.top); n || (n = R("meta", { name: "viewport" }, null, null, self.top), u.head.appendChild(n)), n.content = "width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" } else { var r = T('head meta[name="viewport"]', self.top); s && r ? r.content = f : r && u.head.removeChild(r) } }(t) } }, b = function () { p && g && (W(i), h = !1, y()) }, w = function () { p && g && (!function (e) { U(e, { display: "block" }) }(i), h = !0, y(), i.focus()) }, O = function () { !function (e, t) { (t || document.body).appendChild(e) }(i, c || l || void 0), c || u.addEventListener("keyup", function (e) { 27 === e.keyCode && b() }) }, x = function (t) { var n = "".concat(Math.min(q, window.innerWidth), "px"), r = "".concat(V, "px"); U(i, { width: t ? "100%" : n, bottom: t ? "0px" : "5px", height: r, top: "" }), function (t) { var n, r = e(); if (r.queueViewPosition && r.queueViewPosition !== o.raw || !o.side || !o.offset) { o.raw = r.queueViewPosition || o.raw; var a = te.exec(o.raw); if (!a) throw new Error("queueViewPosition param (".concat(r.queueViewPosition || "", ') is invalid. (valid ex: "right:35px")')); o.side = a[1], o.offset = a[2] || "0" } n = t ? { left: "0px", right: "0px" } : "left" === o.side ? { left: o.offset || "", right: "" } : { right: o.offset || "", left: "" }, U(i, n) }(t), v = !1, y() }, P = function () { var e; e = c ? { height: "".concat(K, "px"), width: "100%" } : { width: "100%", height: "100%", top: "0px", left: "0px", bottom: "" }, U(i, e), v = p, y() }, E = function () { w(), P() }, j = function (e) { x(!e.matches) }, S = function (e) { switch (a.removeListener(j), e.type) { case N.INITIAL: case N.EXPANDED: P(); break; case N.MINI: x(!a.matches), a.addListener(j) } }, C = function (e) { return i.contentWindow.postMessage(e, t) }, I = function () { return g }, k = function () { return p }, _ = function () { return p && h }, A = function () { return k() && !v }, M = function () { b(), p = !1 }, D = function (e) { p = !0, g && (E(), e && e.files && W(i)) }, L = function () { p && g && !v && x(!a.matches) }, F = function e() { i.removeEventListener("load", e), g = !0, n({ open: D, close: M, showWidget: w, hideWidget: b, isFrameReady: I, isWidgetOpen: k, isWidgetMinimized: A, isWidgetShowing: _, postMessage: C, handleWidgetViewTypeChange: S, optionsUpdated: L }), E() }; !function (n) { u = function () { var e = self.document; try { e = self.top.document } catch (e) { } return e }(); var r = function (e) { var t = []; return e.debug && t.push("debug=true"), e.dev && t.push("dev=true"), e.cloudName && t.push("cloudName=".concat(e.cloudName)), t.push("pmHost=".concat(self.location.protocol, "//").concat(self.location.host)), t }(n), o = "".concat(t, "?").concat(r.join("&")); i.setAttribute("src", o), W(i), U(i, { position: c ? null : l ? "absolute" : "fixed", zIndex: c ? null : n.frameZIndex || "1000000" }), i.addEventListener("load", F), function () { if (!0 === e().controlVpMeta) { var t = T('head meta[name="viewport"]', self.top); t && (f = t.content, s = !0) } }(), O() }(r) }, re = "fetch" in self; function oe(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); t && (r = r.filter(function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable })), n.push.apply(n, r) } return n } function ie(e, t, n) { return t in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e } function ae(e) { return (ae = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e })(e) } var ce = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "GET", n = arguments.length > 2 ? arguments[2] : void 0, r = arguments.length > 3 ? arguments[3] : void 0, o = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : {}, i = n && "object" === ae(n) ? JSON.stringify(n) : n, a = re; return (a ? self.fetch(e, function (e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}; t % 2 ? oe(n, !0).forEach(function (t) { ie(e, t, n[t]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : oe(n).forEach(function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) }) } return e }({ method: t, body: i, headers: r ? new Headers(r) : void 0 }, o.fetchOptions)) : new Promise(function (n, a) { var c = new XMLHttpRequest; c.open(t, e), o.responseType && (c.responseType = o.responseType), c.onerror = function () { return a(c) }, c.ontimeout = function () { return a(c) }, c.onload = function () { return n(c) }, function (e, t) { if (t) { var n = t; Object.keys(n).forEach(function (t) { return e.setRequestHeader(t, n[t]) }) } }(c, r), c.send(i) })).then(function (e, t, n) { var r = t.responseType, o = function (e) { return n.response = e, n }; return !t.dontRead && e && n.ok ? r && n[r] ? n[r]().then(o) : n.json().then(o) : n }.bind(null, a, o)) }, le = h(), ue = "cloudinary-button", de = "cloudinary-thumbnails", se = "cloudinary-thumbnail", fe = "cloudinary-delete", pe = function (e) { return e.fieldName || "image" }, ge = function (e, t) { var n = t.form; return !n && e && (n = function (e, t) { var n = null; if (e.closest) n = e.closest(t); else { var r = self.document.querySelectorAll(t); if (r && r.length) for (var o = 0; o < r.length; o++) { var i = r[o]; if (H(i, e)) { n = i; break } } } return n }(e, "form")), n }, he = function (e, t, n) { var r = ge(t, n); r && (r = T(r)) && function (e, t, n) { var r = R("input", { type: "hidden", name: pe(n) }, null, { cloudinaryPublicId: e.public_id }); r.value = "".concat([e.resource_type, e.type, e.path].join("/"), "#").concat(e.signature); try { r.dataset.cloudinary = JSON.stringify(e) } catch (e) { le.error("[all.pageIntegrations]: failed to add info as serialized data attribute") } t.appendChild(r) }(e, r, n) }, ve = function (e, t, n, r, o, i) { e.addEventListener("click", function a(c) { var l = function (e) { return e.deleteHost ? e.deleteHost : "https://api".concat(e.dev ? "-dev" : e.staging ? "-staging" : "", ".cloudinary.com") }(o), u = "".concat(l, "/v1_1/").concat(o.cloudName, "/delete_by_token"); return le.log("[all.pageIntegrations]: \n        about to send delete request with token: ".concat(r.delete_token, " to : ").concat(u)), c.preventDefault(), ce(u, "POST", { token: r.delete_token }, { "Content-Type": "application/json" }, { dontRead: !0 }).then(function (c) { 200 === c.status && (le.log("[all.pageIntegrations]: successfully deleted file"), e.removeEventListener("click", a), function (e, t, n, r) { L(e); var o = ge(t, r); if (o) { var i = o.querySelector('input[name="'.concat(pe(r), '"][data-cloudinary-public-id="').concat(n.public_id, '"]')); i && L(i) } }(t, n, r, o), i.triggerEvent("cloudinarywidgetdeleted", r)) }).catch(function (e) { le.warn("[all.pageIntegrations]: failed to delete file with status: ".concat(e.status)) }) }) }, me = function (e, t, n, r) { if (!1 !== n.thumbnails && (n.thumbnails || t)) { var o = !0, i = T(".".concat(de)); if (i || (o = !1, i = R("ul", null, de)), i.appendChild(function (e, t, n, r) { var o, i = R("li", null, se, { cloudinary: JSON.stringify(e) }); e.thumbnail_url ? (o = R("img", { src: e.thumbnail_url })).addEventListener("load", function e() { i.classList.add("active"), o.removeEventListener("load", e) }) : (o = R("span")).textContent = e.public_id; if (i.appendChild(o), e.delete_token) { var a = R("a", { href: "#" }, fe); a.textContent = "x", i.appendChild(a), ve(a, i, t, e, n, r) } return i }(e, t, n, r)), !o) { le.log("[all.pageIntegrations]: adding thumbnails list to dom"); var a = n.thumbnails && T(n.thumbnails); a ? a.appendChild(i) : t && t.insertAdjacentElement("afterend", i) } } }, ye = function (e, t) { return 0 === t ? e : e.substr(0, 1).toUpperCase() + e.substr(1) }, be = function (e) { return Object.keys(e).reduce(function (t, n) { return t[function (e) { return e.indexOf("_") > 0 }(n) ? function (e) { return e.split("_").map(ye).join("") }(n) : n] = e[n], t }, {}) }, we = ["keepWidgetOpen", "stylesheet"], Oe = Object.prototype.toString, xe = function (e) { return we.forEach(function (t) { void 0 !== e[t] && function () { var e; (e = console).warn.apply(e, arguments) }("Cloudinary.UploadWidget - '".concat(t, "' is no longer used in this version.")) }) }, Pe = function (e) { return e ? be(e) : {} }, Ee = g(), je = "DATA_URL", Se = "ARRAY_BUFFEr", Ce = g(), Ie = 0, ke = function (e) { var t = null, n = function (n, r, o, i, a) { var c; return !i.maxFileSize || i.maxFileSize > 0 && n.size <= i.maxFileSize ? (t || (t = function () { var e = [], t = new FileReader, n = null, r = function () { n && n.readResolve({ file: n.file, index: n.index, count: n.count, result: t.result }), o() }, o = function () { n = null, t.removeEventListener("load", r, !1), t.removeEventListener("error", i, !1), e.length && a(e.shift()) }, i = function () { Ee.log("[utils.fileReader]: failed to read file", t.error), n && n.readReject(t.error), o() }, a = function (e) { n = e, t.addEventListener("load", r, !1), t.addEventListener("error", i, !1), e.readAs === Se ? t.readAsArrayBuffer(e.file) : t.readAsDataURL(e.file) }, c = function (n, r) { var o = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0; return new Promise(function (c, l) { var u = { file: r, index: o, count: i, readAs: n, readResolve: c, readReject: l }; 1 !== t.readyState ? a(u) : e.push(u) }) }; return { readAsUrl: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0; return c(je, e, t, n) }, readAsBuffer: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0; return c(Se, e, t, n) } } }()), c = t.readAsUrl(n, r, o).then(function (t) { return function (t, n) { var r = t.file, o = t.result, i = t.index, a = t.count; e.sendMessage(_, { lastModified: r.lastModified, lastModifiedDate: r.lastModifiedDate, hdcFullPath: r.hdcFullPath, name: r.name, size: r.size, type: r.type, file: o, index: i, count: a, batchId: n }, !0) }(t, a) }).catch(function (e) { Ce.error("[global.all.uploadsHandler]: failed to send file data to widget for upload", e.code, n) })) : Ce.log("[global.all.uploadsHandler]: provided file is larger than max file size configured", n.size), c }, r = function (t, r, o) { return Promise.race(Array.prototype.map.call(t, function (i, a) { var c = null; return !function (e) { return F && (e instanceof File || "[object File]" === e.toString()) }(i) ? z(i) ? e.sendMessage(_, { file: i, index: a, count: t.length, batchId: o }) : Ce.warn("[global.all.uploadsHandler]: unknown type of object sent to upload", i) : c = n(i, a, t.length, r, o), c })) }; return { handleFiles: function (t, n) { return t && t.files && t.files.length ? function (t, n) { var o = "batch_".concat(Ie += 1); return e.sendMessage(A, { batchId: o, count: t.length }), r(t, n, o) }(t.files, n) : Promise.resolve() } } }; function _e(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); t && (r = r.filter(function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable })), n.push.apply(n, r) } return n } function Ae(e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}; t % 2 ? _e(n, !0).forEach(function (t) { Me(e, t, n[t]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : _e(n).forEach(function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) }) } return e } function Me(e, t, n) { return t in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e } var De = h(), Ne = 0, Re = function (e, t) { var n = function (e, t) { if (e = e || {}, "[object Object]" !== Oe.call(e)) throw new Error("[Cloudinary.UploadWidget]: widget options must be a valid Object"); var n = Pe(e); return n.secure = !1 !== n.secure, n.requirePrepareParams = !!n.prepareUploadParams || !!n.uploadSignature, n.useTagsCallback = B(n.getTags), n.useUploadPresetsCallback = B(n.getUploadPresets), n.usePreBatchCallback = B(n.preBatch), n.useMetadataCallback = B(n.getMetadataSchema), n.inlineMode = !!n.inlineContainer, n.fieldName = e.fieldName || t && t.getAttribute("name") || null, xe(n), n }(e, t); return Ne += 1, n.widgetId = "widget_".concat(Ne), n }, Te = function (e, t, n) { n = function (e, t) { var n = e || t && t.element; if (n) { try { n = T(n) } catch (e) { throw new Error("[Cloudinary.UploadWidget]: 'element' param must either be a valid HTMLElement or a selector string") } if (!n || !n.nodeType) throw new Error("[Cloudinary.UploadWidget]: 'element' param must resolve to a valid HTMLElement") } return n }(n, e); var r, o, i, a, c, l = Re(e, n); if (l.inlineContainer && !T(l.inlineContainer)) throw new Error("[Cloudinary.UploadWidget]: 'inlineContainer' param must either be a valid HTMLElement or a selector string"); delete l.element; var u = function (e, t) { l.$ && l.$(n || l.form || document).trigger(e, t) }, d = function (e) { return r ? r.then(e).catch(function (e) { return De.error("Cloudinary.UploadWidget - encountered error ! ", e) }) : De.error("Cloudinary.UploadWidget - Widget frame API not ready yet!") }, s = function (e, t) { return d(function (n) { n.open(t), n.isFrameReady() && (o.sendMessage(S, { source: e, options: t }, !0), i.handleFiles(t, p()).then(function () { setTimeout(function () { n.showWidget(), o.sendDisplayChangedCallback(J) }, 150) })) }) }, f = function (e) { return d(function (t) { var n = Pe(e); o.sendMessage(x, n), l = function (e, t) { var n = Ae({}, t); return D.forEach(function (t) { void 0 !== e[t] && (n[t] = e[t]) }), n }(n, l), t.optionsUpdated() }) }, p = function () { return l }; return function () { var e = function () { var e, t = l.secure ? "https:" : "http:"; if (!0 === l.dev) e = "//widget-dev.cloudinary.com:9990/index.html"; else { var n = l.widgetBase || "//widget".concat(!0 === l.staging ? "-staging" : "", ".cloudinary.com/"), r = "".concat(n, "v2.0/n/"); e = l.widgetHost || "".concat(r + l.cloudName, "/").concat(l.widgetVersion, "/index.html") } return e = 0 !== e.indexOf("http") ? t + e : e }(); (r = function (e, t) { return new Promise(ne.bind(null, e, t)) }(p, e)).then(function (e) { a = e.isWidgetShowing, c = e.isWidgetMinimized, o = ee(p, 0, Ae({ triggerEvent: u, processUploadResult: function (e) { return function (e, t, n, r) { he(e, t, n), me(e, t, n, r) }(e, n, p(), { triggerEvent: u }) }, widgetCallback: t }, e)); var r = p(); o.sendMessage(w, Ae({}, r, { showOnStart: e.isWidgetOpen() })), i = ke(o), n && function (e, t, n) { var r = R("a", { href: "#" }, n.buttonClass || ue); r.innerHTML = n.buttonCaption || "Upload image", e.style.display = "none", e.parentNode && e.parentNode.insertBefore(r, e.previousSibling), r.addEventListener("click", function (e) { return t(), e.preventDefault && e.preventDefault(), e.stopPropagation && e.stopPropagation(), !1 }) }(n, s, r) }) }(), { open: function (e, t) { return s(e, t), this }, update: function (e) { var t = this; return f(e).then(function () { return t }) }, close: function (e) { return function (e) { d(function (t) { t.close(), o.sendMessage(C, e) }) }(e), this }, hide: function () { return d(function (e) { return e.hideWidget() }), this }, show: function () { return d(function (e) { return e.showWidget() }), this }, minimize: function () { return d(function () { o.sendMessage(O) }), this }, isShowing: function () { return !!a && a() }, isMinimized: function () { return !!c && c() } } }, Le = h(); function Ue(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); t && (r = r.filter(function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable })), n.push.apply(n, r) } return n } function We(e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}; t % 2 ? Ue(n, !0).forEach(function (t) { Fe(e, t, n[t]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : Ue(n).forEach(function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) }) } return e } function Fe(e, t, n) { return t in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e } !function (e) { var t = { cloudName: null, apiKey: null }, n = e.jQuery ? e.jQuery : e.$ && e.$.fn && e.$.fn.jquery ? e.$ : null, r = e.location.search.indexOf("debug=true") > -1, i = e.location.search.indexOf("dev=true") > -1; !function (e) { o = e }(r ? c.LOG : c.WARN), function () { try { var e = R("style", { id: "cloudinary-uw-page-styles", type: "text/css" }); e.innerHTML = ".cloudinary-thumbnails { list-style: none; margin: 10px 0; padding: 0 }\n        .cloudinary-thumbnails:after { clear: both; display: block; content: '' }\n        .cloudinary-thumbnail { float: left; padding: 0; margin: 0 15px 5px 0; display: none } \n        .cloudinary-thumbnail.active { display: block } \n        .cloudinary-thumbnail img { border: 1px solid #01304d; border-radius: 2px; -moz-border-radius: 2px; -webkit-border-radius: 2px } \n        .cloudinary-thumbnail span { font-size: 11px; font-family: Arial, sans-serif; line-height: 14px; border: 1px solid #aaa; max-width: 150px; word-wrap: break-word; word-break: break-all; display: inline-block; padding: 3px; max-height: 60px; overflow: hidden; color: #999; } \n        .cloudinary-delete { vertical-align: top; font-size: 13px; text-decoration: none; padding-left: 2px; line-height: 8px; font-family: Arial, sans-serif; color: #01304d }\n        .cloudinary-button { background-color: #0078FF; color: #FFFFFF; text-decoration: none; font-size: 14px; line-height: 28px; height: 28x; cursor: pointer; font-weight: normal; display: inline-block; border-radius: 4px; padding: 10px 14px;}\n        .cloudinary-button:hover {-webkit-box-shadow: 0 2px 4px 0 rgba(0, 0, 0, .5); box-shadow: 0 2px 4px 0 rgba(0, 0, 0, .5); } "; var t = T("head"); t && t.appendChild(e) } catch (e) { Le.error("[all.pageStyles]: failed to apply styles") } }(); var a = e.cloudinary = e.cloudinary || {}; a.applyUploadWidget = function (e, o, a) { return Te(function (e) { return We({}, t, { dev: i, debug: r }, e, { widgetVersion: "281", $: n }) }(o), a, e) }, a.createUploadWidget = function (e, t) { return a.applyUploadWidget(null, e, t) }, a.openUploadWidget = function (e, t) { return a.createUploadWidget(e, t).open() }, a.setCloudName = function (e) { t.cloudName = e }, a.setAPIKey = function (e) { t.apiKey = e }, a.WIDGET_SOURCES = We({}, v), a.WIDGET_VERSION = "281", n && (n.fn.cloudinary_upload_widget = function (e, t) { a.applyUploadWidget(n(this)[0], e, t) }) }(self) }]);
//# sourceMappingURL=all.js.map